# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

Ответ:

```bash
Для отказоустойчивости нужно добавить по одной резервной ноде для каждого сервиса + 1 нода для нечетного количества, чтобы избежать конфликтов при переключении нод.
А так же увечим количество ресурсов на 1,5 дабы гарантировать запас мощности.
И добавим ресурсов для основной и резервной master node
```
Расчет для одного экземляра:

| Имя | RAM | CPU | Кол-во |
| :-----------: | :-----------: | :-----------: | :-----------: | 
| БД | 4000 | 1 | 1 | 
| Кэш | 4000 | 1 | 1 |
| Фронтенд | 50 | 0,2 | 1 |
| Бекенд | 600 | 1 | 1 |
| Общее | 8650 | 3,2 | 4 |

Расчет для вводных данных:

| Имя | RAM | CPU | Кол-во |
| :-----------: | :-----------: | :-----------: | :-----------: | 
| БД | 12000 | 3 | 3 | 
| Кэш | 12000 | 3 | 3 |
| Фронтенд | 250 | 1 | 5 |
| Бекенд | 6000 | 10 | 10 |
| Общее | 30250 | 17 | 21 |

Итоговый расчет worker node:

| Имя | RAM | CPU | Кол-во |
| :-----------: | :-----------: | :-----------: | :-----------: | 
| БД | 20000 | 5 | 5 | 
| Кэш | 20000 | 5 | 5 | 
| Фронтенд | 350 | 1,4 | 7 |
| Бекенд | 6600 | 11 | 11 |
| Общее | 46950 | 22,4 | 28 |
| С запасом | 70425 | 33,6 | 28 |

Итоговый расчет master node:

| Имя | RAM | CPU | Кол-во |
| :-----------: | :-----------: | :-----------: | :-----------: | 
| Master Nodes | 2000 | 2 | 2 | 


## Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.
